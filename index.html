
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì¸ìŠ¤íƒ€ ìŠ¤í† ë¦¬ ìë™ ìƒì„±ê¸°</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-white to-gray-100 min-h-screen flex items-center justify-center px-4">
  <div class="w-full max-w-xl bg-white shadow-xl rounded-2xl p-8 space-y-6">
    <h1 class="text-3xl font-bold text-center text-blue-700">ğŸª„ ì¸ìŠ¤íƒ€ ìŠ¤í† ë¦¬ ìë™ ìƒì„±ê¸°</h1>

    <div>
      <label class="block font-semibold mb-1">ğŸ“¦ ìƒí’ˆëª…</label>
      <input id="productName" type="text" placeholder="ì˜ˆ: íŒŒë¦¬ì§€ì•µ ì„¼ì„œíœ´ì§€í†µ" class="w-full p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500">
    </div>

    <div>
      <label class="block font-semibold mb-1">ğŸ”— ì¿ íŒ¡ ë§í¬</label>
      <input id="productLink" type="url" placeholder="https://link.coupang.com/a/xxxxxx" class="w-full p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500">
    </div>

    <div>
      <label class="block font-semibold mb-1">âœ¨ ìƒí’ˆ ì¥ì  (3ê°€ì§€, ì¤„ë°”ê¿ˆìœ¼ë¡œ ì…ë ¥)</label>
      <textarea id="productBenefits" rows="4" placeholder="ì˜ˆ:\n- ì† ì•ˆ ëŒ€ê³  ìœ„ìƒì ì´ì—ìš”\n- ì„¼ì„œ ë°˜ì‘ì´ ë¹¨ë¼ìš”\n- ì–´ë””ì— ë‘¬ë„ ì˜ˆë»ìš”" class="w-full p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
    </div>

    <div>
      <label class="block font-semibold mb-1">ğŸ–¼ï¸ ìŠ¤í† ë¦¬ ì´ë¯¸ì§€ ì—…ë¡œë“œ</label>
      <input id="imageUpload" type="file" accept="image/*" class="w-full p-2 border rounded" />
    </div>

    <div>
      <label class="block font-semibold mb-1">ğŸ·ï¸ í•´ì‹œíƒœê·¸ ì…ë ¥</label>
      <textarea id="hashtagInput" rows="2" placeholder="#ì£¼ë°©í…œ #ê°ì„±ì¸í…Œë¦¬ì–´ #ì„¼ì„œíœ´ì§€í†µ" class="w-full p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
    </div>

    <button onclick="generateStory()" class="w-full bg-blue-600 text-white py-3 rounded-xl font-semibold hover:bg-blue-700">âœ… ìŠ¤í† ë¦¬ ì½˜í…ì¸  ìƒì„±</button>

    <div id="result" class="mt-6 hidden bg-gray-50 border border-gray-200 p-4 rounded-xl">
      <h2 class="font-bold mb-2 text-lg text-gray-700">ğŸ“² ì¸ìŠ¤íƒ€ ìŠ¤í† ë¦¬ ë¬¸êµ¬</h2>
      <pre id="output" class="whitespace-pre-wrap text-sm font-mono"></pre>
      <div class="flex gap-2 mt-3">
        <button onclick="copyResult()" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">ğŸ“‹ ë³µì‚¬í•˜ê¸°</button>
        <button onclick="downloadZIP()" class="px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700">ğŸ“¦ ZIP ë‹¤ìš´ë¡œë“œ</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jszip@3.7.1/dist/jszip.min.js"></script>
  <script>
    function generateStory() {
      const product = document.getElementById('productName').value.trim();
      const link = document.getElementById('productLink').value.trim();
      const benefitsRaw = document.getElementById('productBenefits').value;
      const benefits = benefitsRaw.split('\n').filter(b => b.trim() !== '');

      if (!product || !link || benefits.length < 1) {
        alert('ìƒí’ˆëª…, ë§í¬, ì¥ì ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }

      if (!link.startsWith('https://link.coupang.com')) {
        alert('âš ï¸ ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ ë§í¬ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }

      let output = `ğŸ™Œ ${product}\n`;
      benefits.forEach((b, i) => {
        output += `${i + 1}. ${b}\n`;
      });
      output += `\nğŸ‘‡ ì œí’ˆ ë³´ëŸ¬ê°€ê¸°\n${link}`;

      document.getElementById('output').textContent = output;
      document.getElementById('result').classList.remove('hidden');
    }

    function copyResult() {
      const text = document.getElementById('output').textContent;
      navigator.clipboard.writeText(text).then(() => {
        alert('ğŸ“ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
      });
    }

    function downloadZIP() {
      const zip = new JSZip();
      const content = document.getElementById('output').textContent;
      const imageFile = document.getElementById('imageUpload').files[0];
      const hashtags = document.getElementById('hashtagInput').value.trim() || '#ì„¼ì„œíœ´ì§€í†µ #ì£¼ë°©í…œ #ìƒí™œê¿€íŒ';

      zip.file('insta_story.txt', content);
      zip.file('hashtags.txt', hashtags);

      if (imageFile) {
        const ext = imageFile.name.split('.').pop().toLowerCase();
        const imageName = `insta_story_image.${ext}`;
        const reader = new FileReader();
        reader.onload = function (e) {
          zip.file(imageName, e.target.result.split(',')[1], { base64: true });
          zip.generateAsync({ type: 'blob' }).then(function (blob) {
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'insta_story_package.zip';
            a.click();
          });
        };
        reader.readAsDataURL(imageFile);
      } else {
        zip.generateAsync({ type: 'blob' }).then(function (blob) {
          const a = document.createElement('a');
          a.href = URL.createObjectURL(blob);
          a.download = 'insta_story_package.zip';
          a.click();
        });
      }
    }
  </script>
</body>
</html>